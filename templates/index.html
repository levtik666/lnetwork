<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LNetwork</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>
<body class="bg-black text-white min-h-screen flex">

<!-- Левый навигатор -->
<aside class="w-64 bg-gray-900 h-screen p-6 flex flex-col justify-between fixed">
    <div class="flex flex-col gap-8">
        <div class="flex items-center gap-2 text-xl font-bold mb-6">
            <i class="bi bi-lightning-charge-fill text-yellow-400"></i> LNetwork
        </div>
        <nav class="flex flex-col gap-4 text-gray-300 text-sm">
            <a href="/" class="flex items-center gap-2 p-2 rounded-lg hover:bg-gray-800 hover:text-white">
                <i class="bi bi-house-fill"></i> Главная
            </a>
            <a href="/news" class="flex items-center gap-2 p-2 rounded-lg hover:bg-gray-800 hover:text-white">
                <i class="bi bi-newspaper"></i> Лента
            </a>
            <a href="/channels" class="flex items-center gap-2 p-2 rounded-lg hover:bg-gray-800 hover:text-white">
                <i class="bi bi-kanban-fill"></i> Каналы
            </a>
            <a href="/friends" class="flex items-center gap-2 p-2 rounded-lg hover:bg-gray-800 hover:text-white">
                <i class="bi bi-people-fill"></i> Друзья
            </a>
            <a href="/settings" class="flex items-center gap-2 p-2 rounded-lg hover:bg-gray-800 hover:text-white">
                <i class="bi bi-gear-fill"></i> Настройки
            </a>
        </nav>
    </div>

    {% if session.get('user_id') %}
    <div class="flex flex-col gap-2">
        <a href="/profile" class="flex items-center gap-2 p-2 rounded-lg hover:bg-gray-800 hover:text-white">
            <i class="bi bi-person-circle"></i> Мой профиль
        </a>
        <a href="/logout" class="flex items-center gap-2 p-2 rounded-lg hover:bg-gray-800 hover:text-white">
            <i class="bi bi-box-arrow-right"></i> Выйти
        </a>
    </div>
    {% else %}
    <div class="flex flex-col gap-2">
        <a href="/login" class="flex items-center gap-2 p-2 rounded-lg hover:bg-gray-800 hover:text-white">
            <i class="bi bi-box-arrow-in-right"></i> Войти
        </a>
        <a href="/register" class="flex items-center gap-2 p-2 rounded-lg hover:bg-gray-800 hover:text-white">
            <i class="bi bi-pencil-square"></i> Регистрация
        </a>
    </div>
    {% endif %}
</aside>

<!-- Контент -->
<main class="flex-1 ml-64 p-6 flex gap-6">

    <!-- Центральная колонка постов -->
    <div class="flex-1 flex flex-col gap-6">

        {% block content %}{% endblock %}

    </div>

    <!-- Правая колонка -->
    <aside class="w-80 flex-shrink-0 hidden lg:flex flex-col gap-6">
        <div class="bg-gray-900 p-4 rounded-lg shadow-md">
            <h3 class="font-semibold mb-2">Популярные каналы</h3>
            {% for channel in top_channels %}
            <a href="{{ url_for('channel_view', channel_id=channel[0]) }}" class="flex items-center gap-3 p-2 rounded-lg hover:bg-gray-800">
                {% if channel[4] %}
                    <img src="{{ url_for('static', filename='uploads/' + channel[4]) }}" class="w-10 h-10 object-cover rounded-lg">
                {% else %}
                    <div class="w-10 h-10 bg-gray-700 flex items-center justify-center rounded-lg text-gray-400 text-xs">К</div>
                {% endif %}
                <span class="text-sm">{{ channel[1] }}</span>
            </a>
            {% endfor %}
        </div>
    </aside>

</main>

</body>
</html>
